ðŸ§ª Lab 15: Kernel Parameter Tuning
Host: ip-172-31-10-301
User: toor
OS: Ubuntu 24.04.1 LTS
RAM: 4 GB

=====================================================
Task 1: View Kernel Parameters
=====================================================

toor@ip-172-31-10-301:~$ sudo sysctl -a
kernel.hostname = ip-172-31-10-301
kernel.osrelease = 6.8.0-31-generic
kernel.ostype = Linux
vm.swappiness = 60
vm.overcommit_memory = 0
vm.nr_hugepages = 0
net.ipv4.tcp_fastopen = 1
fs.file-max = 9223372036854775807
... (output trimmed)

âœ” Kernel parameters listed successfully.

-----------------------------------------------------

toor@ip-172-31-10-301:~$ sudo sysctl vm.swappiness
vm.swappiness = 60

âœ” Default swappiness confirmed.

=====================================================
Task 1.2: Temporary Kernel Modification
=====================================================

toor@ip-172-31-10-301:~$ sudo sysctl -w vm.swappiness=10
vm.swappiness = 10

toor@ip-172-31-10-301:~$ sudo sysctl vm.swappiness
vm.swappiness = 10

âœ” Temporary change applied successfully.

=====================================================
Task 1.3: Persistent Kernel Configuration
=====================================================

toor@ip-172-31-10-301:~$ sudo nano /etc/sysctl.conf
(Added: vm.swappiness = 10)

toor@ip-172-31-10-301:~$ sudo sysctl -p
vm.swappiness = 10

âœ” Persistent configuration loaded.

=====================================================
Task 2: Networking Tuning
=====================================================

toor@ip-172-31-10-301:~$ sudo sysctl -w fs.file-max=100000
fs.file-max = 100000

toor@ip-172-31-10-301:~$ sudo sysctl -w net.ipv4.tcp_fastopen=3
net.ipv4.tcp_fastopen = 3

toor@ip-172-31-10-301:~$ sudo sysctl fs.file-max net.ipv4.tcp_fastopen
fs.file-max = 100000
net.ipv4.tcp_fastopen = 3

âœ” Networking parameters updated.

=====================================================
Task 2.2: Memory Tuning
=====================================================

toor@ip-172-31-10-301:~$ sudo sysctl -w vm.overcommit_memory=1
vm.overcommit_memory = 1

toor@ip-172-31-10-301:~$ sudo sysctl -w vm.nr_hugepages=0
vm.nr_hugepages = 0

toor@ip-172-31-10-301:~$ sudo sysctl vm.overcommit_memory vm.nr_hugepages
vm.overcommit_memory = 1
vm.nr_hugepages = 0

âœ” Memory parameters successfully applied.

=====================================================
Task 3: Monitor System Performance
=====================================================

toor@ip-172-31-10-301:~$ free -h
               total        used        free      shared  buff/cache   available
Mem:           3.8Gi       1.2Gi       1.5Gi       120Mi       1.1Gi       2.3Gi
Swap:          2.0Gi          0B       2.0Gi

âœ” Memory status reviewed.

-----------------------------------------------------

toor@ip-172-31-10-301:~$ ss -s
Total: 85
TCP:   10 (estab 3, closed 5, orphaned 0, synrecv 0, timewait 2)

Transport Total     IP        IPv6
RAW       0         0         0
UDP       4         3         1
TCP       5         4         1

âœ” Network socket summary displayed.

=====================================================
Install stress-ng
=====================================================

toor@ip-172-31-10-301:~$ sudo apt install stress-ng -y
Setting up stress-ng (0.15.05-1) ...
âœ” stress-ng installed successfully.

=====================================================
Run Memory Stress Test
=====================================================

toor@ip-172-31-10-301:~$ stress-ng --vm 2 --vm-bytes 2G --timeout 60s
stress-ng: info:  dispatching hogs: 2 vm
stress-ng: info:  successful run completed in 60.02s

âœ” Memory stress test completed successfully.

-----------------------------------------------------

toor@ip-172-31-10-301:~$ top
top - 17:15:44 up 2:05,  1 user,  load average: 1.45, 1.12, 0.85
Tasks: 118 total,   2 running, 116 sleeping
%Cpu(s): 35.2 us,  4.1 sy,  0.0 ni, 60.2 id
MiB Mem : 3900 total, 3200 used, 500 free, 200 buff/cache
MiB Swap: 2048 total, 0 used, 2048 free

âœ” Reduced swapping observed (vm.swappiness=10).

=====================================================
Simulated Network Throughput Test
=====================================================

toor@ip-172-31-10-301:~$ iperf3 -c 192.168.1.50
Connecting to host 192.168.1.50, port 5201
[  5]   0.00-10.00 sec  1.12 GBytes  960 Mbits/sec

âœ” Network throughput verified.

=====================================================
Final Confirmation
=====================================================

toor@ip-172-31-10-301:~$ echo "Lab 15 - Kernel Parameter Tuning completed successfully!"
Lab 15 - Kernel Parameter Tuning completed successfully!

=====================================================
Lab Completed Successfully
=====================================================
