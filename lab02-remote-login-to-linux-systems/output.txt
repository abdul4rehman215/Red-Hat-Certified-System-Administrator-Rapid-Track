============================================================
Lab 02 – Remote Login to Linux Systems (SSH)
Execution Output Log
============================================================


==============================
LOCAL MACHINE – Ubuntu 24.04
User: toor
IP: 172.31.10.201
==============================

------------------------------
Check Existing SSH Keys
------------------------------

toor@ip-172-31-10-201:~$ ls ~/.ssh/
ls: cannot access '/home/toor/.ssh/': No such file or directory


------------------------------
Generate New SSH Key Pair
------------------------------

toor@ip-172-31-10-201:~$ ssh-keygen -t rsa -b 4096 -C "student@lab.local"
Generating public/private rsa key pair.
Enter file in which to save the key (/home/toor/.ssh/id_rsa): 
Created directory '/home/toor/.ssh'.
Enter passphrase (empty for no passphrase): ********
Enter same passphrase again: ********
Your identification has been saved in /home/toor/.ssh/id_rsa
Your public key has been saved in /home/toor/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:V7kJx8k2s9aLpM0ZfT4r1E7qR6yX3bP student@lab.local
The key's randomart image is:
+---[RSA 4096]----+
|     .o+.        |
|    . o+o        |
|   . .+..        |
|  .  = .         |
|   o S +         |
|  . o * .        |
|   . E +         |
|    . o .        |
|     ..          |
+----[SHA256]-----+


------------------------------
Verify Generated Keys
------------------------------

toor@ip-172-31-10-201:~$ ls ~/.ssh/
id_rsa  id_rsa.pub


------------------------------
SSH Client Install Check
------------------------------

toor@ip-172-31-10-201:~$ sudo apt install openssh-client -y
Reading package lists... Done
Building dependency tree       
Reading state information... Done
openssh-client is already the newest version (1:9.6p1-3ubuntu13).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.


------------------------------
Copy Public Key to Remote Host
------------------------------

toor@ip-172-31-10-201:~$ ssh-copy-id student@172.31.10.88
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/toor/.ssh/id_rsa.pub"
The authenticity of host '172.31.10.88 (172.31.10.88)' can't be established.
ECDSA key fingerprint is SHA256:Qk3Lm2v9R7kF5xZp9nM8.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '172.31.10.88' (ECDSA) to the list of known hosts.
student@172.31.10.88's password:
Number of key(s) added: 1

Now try logging into the machine, with:
  "ssh 'student@172.31.10.88'"
and check to make sure that only the key(s) you wanted were added.


============================================================
REMOTE MACHINE – CentOS Linux 7
User: student
IP: 172.31.10.88
============================================================

------------------------------
Console Login
------------------------------

CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

localhost login: student
Password:
Last login: Sun Feb 23 11:28:12 on tty2
[student@localhost ~]$


------------------------------
Install OpenSSH Server
------------------------------

[student@localhost ~]$ sudo yum install openssh-server -y
Loaded plugins: fastestmirror
Determining fastest mirrors
Resolving Dependencies
--> Running transaction check
---> Package openssh-server.x86_64 0:7.4p1-22.el7 will be installed
--> Finished Dependency Resolution

Installed:
  openssh-server.x86_64 0:7.4p1-22.el7

Complete!


------------------------------
Start SSH Service
------------------------------

[student@localhost ~]$ sudo systemctl start sshd
(No output)


------------------------------
Enable SSH Service
------------------------------

[student@localhost ~]$ sudo systemctl enable sshd
Created symlink from /etc/systemd/system/multi-user.target.wants/sshd.service to /usr/lib/systemd/system/sshd.service.


------------------------------
Edit SSH Configuration
------------------------------

[student@localhost ~]$ sudo nano /etc/ssh/sshd_config

Updated configuration:
PasswordAuthentication no
PermitRootLogin no
PubkeyAuthentication yes


------------------------------
Restart SSH Service
------------------------------

[student@localhost ~]$ sudo systemctl restart sshd
(No output)


------------------------------
Adjust SSH Directory Permissions
------------------------------

[student@localhost ~]$ chmod 700 ~/.ssh
[student@localhost ~]$ chmod 600 ~/.ssh/authorized_keys


============================================================
TEST REMOTE LOGIN (FROM LOCAL MACHINE)
============================================================

toor@ip-172-31-10-201:~$ ssh student@172.31.10.88
Enter passphrase for key '/home/toor/.ssh/id_rsa':
Last login: Sun Feb 23 11:32:10 from 172.31.10.201
[student@localhost ~]$


------------------------------
Verify Remote Session
------------------------------

[student@localhost ~]$ whoami
student

[student@localhost ~]$ hostname
localhost.localdomain


------------------------------
Firewall Adjustment (If Required)
------------------------------

[student@localhost ~]$ sudo firewall-cmd --add-service=ssh --permanent
success

[student@localhost ~]$ sudo firewall-cmd --reload
success


============================================================
LAB COMPLETED SUCCESSFULLY
============================================================

- RSA 4096-bit SSH key pair generated
- SSH server installed and enabled
- Public key successfully copied
- Password authentication disabled
- Root login disabled
- Secure key-based SSH login verified
- Remote identity confirmed
